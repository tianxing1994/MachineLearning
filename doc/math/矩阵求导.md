### 矩阵求导
* 矩阵求导时应该先理解求导的过程实际上是对线性方程组中各因变量对各等式, 各自变量求导. 
* 如果一组矩阵的运算结果是一个数值, 则对这组矩阵进行转置, 结果应该是不变的. 
* 不能将对 $x$ 求导和对 $x^{T}$ 求导混为一谈. 如果对 x 求导时, 矩阵组中只有 $x^{T}$ 则应注意是否可以对这个矩阵组进行转置再消除 x 项.



#### 对于一次方程组, 已知: 
$$y_{1} = a_{11}x_{1} + a_{12}x_{2}$$
$$y_{2} = a_{21}x_{1} + a_{22}x_{2}$$

##### 1. 令其矩阵形式为: 
$$Y = AX$$

求 ∂Y/∂X:
求 Y 对 X 的导数, 显然, 需要分别求 $y_{1}$ 对 $x_{1}, x_{2}$ 的导数, $y_{2}$ 对 $x_{1}, x_{2}$ 的导数. 即, 结果是一个矩阵: 
$$
\left[
\begin{matrix}
 a_{11}      & a_{12} \\
a_{21}  & a_{22} \\
\end{matrix}
\right]
$$

即: 矩阵 $Y = AX$ 的导数为: $A$ .
此处, 矩阵 ∂Y/∂X 需要表达的内容是, Y 向量中每一个值与 X 中每一个值的变化率关系, 因为 Y 中的每一个值都与 X 向量中的所有值 $[x_{1} x_{2} ... x_{n}]$ 相关, 所以得到的矩阵应为 m 行 n 列.
##### 2. 以上方程组, 我们对其转置. 
$$Y = XA$$
即: 
$$Y = [y_{1}, y_{2}]$$
$$X = [x_{1}, x_{2}]$$

$$
A = 
\left[
\begin{matrix}
a_{11}      & a_{21} \\
a_{12}      & a_{22} \\
\end{matrix}
\right]
$$

则, 矩阵 $Y = XA$ 的导数为: $A^{T}$ .

$$
A^{T} = 
\left[
\begin{matrix}
 a_{11}      & a_{12} \\
a_{21}  & a_{22} \\
\end{matrix}
\right]
$$


#### 对于二次方程组: 
$$y_{1} = a_{11}x_{1}^{2}  + a_{12}x_{2}^{2} $$
$$y_{2} = a_{21}x_{1}^{2}  + a_{22}x_{2}^{2} $$

令: 
$$Y = [y_{1}, y_{2}]^{T}$$
$$X = [x_{1}, x_{2}]^{T}$$
$$X^{2} = [x_{1}^{2}, x_{2}^{2}]^{T}$$
$$
A = 
\left[
\begin{matrix}
 a_{11}      & a_{12} \\
a_{21}  & a_{22} \\
\end{matrix}
\right]
$$
则以上方程组可写为: 
$$Y = AX^{2}$$

$$
∂Y/∂X^{2} =
A = 
\left[
\begin{matrix}
 a_{11}      & a_{12} \\
a_{21}  & a_{22} \\
\end{matrix}
\right]
$$

$$∂X^{2}/∂X = [2x_{1}, 2x_{2}]$$

$$
∂Y/∂X = 
\left[
\begin{matrix}
 a_{11}      & a_{12} \\
a_{21}  & a_{22} \\
\end{matrix}
\right]
×
\left[
\begin{matrix}
2x_{1}    & 2x_{2}
\end{matrix}
\right]
=
\left[
\begin{matrix}
2a_{11}x_{1}     & 2a_{12}x_{2} \\
2a_{21}x_{1}     & 2a_{22}x_{2} \\
\end{matrix}
\right]
$$


#### 方程组: 

$$y_{1} = a_{11}x_{1} + a_{12}x_{2}$$
$$y_{2} = a_{21}x_{1} + a_{22}x_{2}$$

$$x_{1} = b_{11}t_{1} + b_{12}t_{2}$$
$$x_{2} = b_{21}t_{1} + b_{22}t_{2}$$

我们已经知道: 

$$
∂Y/∂X = 
\left[
\begin{matrix}
a_{11}     & a_{12} \\
a_{21}     & a_{22} \\
\end{matrix}
\right]
$$

$$
∂X/∂T = 
\left[
\begin{matrix}
b_{11}     & b_{12} \\
b_{21}     & b_{22} \\
\end{matrix}
\right]
$$

那么 ∂Y/∂T 呢: 
$$y_{1} = a_{11}x_{1} + a_{12}x_{2} = a_{11}×(b_{11}t_{1} + b_{12}t_{2}) + a_{12}  × (b_{21}t_{1} + b_{22}t_{2})$$
可见: 
$$∂y1/∂t1 = a_{11}b_{11} + a_{12}b_{21}$$
$$∂y1/∂t2 = a_{11}b_{12} + a_{12}b_{22}$$
$$∂y2/∂t1 = a_{21}b_{11} + a_{22}b_{21}$$
$$∂y2/∂t2 = a_{21}b_{12} + a_{22}b_{22}$$

$$
∂Y/∂T = 
\left[
\begin{matrix}
a_{11}b_{11} + a_{12}b_{21}     & a_{11}b_{12} + a_{12}b_{22} \\
a_{21}b_{11} + a_{22}b_{21}     & a_{21}b_{12} + a_{22}b_{22} \\
\end{matrix}
\right]
= 
\left[
\begin{matrix}
a_{11}     & a_{12} \\
a_{21}     & a_{22} \\
\end{matrix}
\right]
·
\left[
\begin{matrix}
b_{11}     & b_{12} \\
b_{21}     & b_{22} \\
\end{matrix}
\right]
=
A·B
$$


#### 假设有
$$
X = 
\left[
\begin{matrix}
a_{11}     & a_{12} \\
a_{21}     & a_{22} \\
\end{matrix}
\right]
$$

$$
Y = 
X^{T}X = 
\left[
\begin{matrix}
a_{11}     & a_{21} \\
a_{12}     & a_{22} \\
\end{matrix}
\right]
·
\left[
\begin{matrix}
a_{11}     & a_{12} \\
a_{21}     & a_{22} \\
\end{matrix}
\right]
=
\left[
\begin{matrix}
a_{11}^{2}+a_{21}^{2}     & a_{11}a_{12}+a_{21}a_{22} \\
a_{11}a_{12}+a_{21}a_{22}     & a_{12}^{2}+a_{22}^{2} \\
\end{matrix}
\right]
$$

要表示 Y 中的每一个元素与 X 中的每一个元素的关系, 则: 
$$
∂Y/∂X = 
\left[
\begin{matrix}
[2a_{11} & 0 & 2a_{21} & 0]     & [a_{12} & a_{11} & a_{22} & a_{21}]\\
[a_{12} & a_{11} & a_{22} & a_{21}]     & [0 & 2a_{12} & 0 & 2a_{22}] \\
\end{matrix}
\right]
$$
注: 矩阵中的子矩阵分别代表 Y 中对应元素与 X 中 $a_{11} a_{12} a_{21} a_{22}$ 的导数关系.